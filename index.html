<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Cá Nhân</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* Sử dụng font Inter từ Google Fonts nếu Tailwind không tự động áp dụng */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c0a18; /* Màu nền tối hơn một chút cho không gian */
            color: #f3f4f6; /* text-gray-100 */
            overflow-x: hidden; /* Ngăn cuộn ngang do hiệu ứng sao */
        }

        /* Tùy chỉnh thanh cuộn (cho trình duyệt Webkit) */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937; /* bg-gray-800 */
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563; /* bg-gray-600 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280; /* bg-gray-500 */
        }

        .social-item-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: rgba(31, 41, 55, 0.8);
            padding: 1rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(75, 85, 99, 0.5);
        }
        .social-item-container:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
        }

        .social-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .qr-code-social-wrapper { /* Wrapper cho QR và ghi chú */
            text-align: center;
        }
        .qr-code-social {
            cursor: pointer;
            transition: transform 0.2s ease-in-out;
            display: block; /* Để margin auto hoạt động */
            margin-left: auto;
            margin-right: auto;
        }
        .qr-code-social:hover {
            transform: scale(1.1);
        }
        .main-avatar-image { /* Class cho avatar chính để dễ dàng target */
             cursor: pointer;
        }
        .no-context-menu { /* Class để vô hiệu hóa menu chuột phải */
            pointer-events: auto; /* Đảm bảo vẫn click được */
        }
        #modalBankQR { /* Thêm cursor pointer cho QR ngân hàng trong modal */
            cursor: pointer;
        }
        #enlargedSocialQrImage { /* Thêm cursor pointer cho QR MXH phóng to */
            cursor: pointer;
        }


        .bank-logo-container {
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 0.75rem;
            transition: background-color 0.3s ease, transform 0.3s ease;
            background-color: rgba(31, 41, 55, 0.8);
            border: 1px solid rgba(75, 85, 99, 0.5);
        }
        .bank-logo-container:hover {
            background-color: rgba(55, 65, 81, 0.9);
            transform: scale(1.05);
        }
        .bank-logo-img {
            width: 5rem;
            height: 5rem;
            object-fit: contain;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 0.5rem;
            border-radius: 0.375rem;
            background-color: white;
            padding: 0.25rem;
        }
        /* Modal styles */
        .modal {
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
            z-index: 50;
        }
        .modal-content {
            transition: transform 0.3s ease-in-out;
            background-color: #1f2937; /* bg-gray-800 */
        }
        .modal.open .modal-content {
            transform: scale(1) translateY(0);
        }
        .modal .modal-content {
            transform: scale(0.95) translateY(20px);
        }

        /* Hiệu ứng sao rơi */
        #star-fall-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: fall linear infinite, twinkle 1.5s ease-in-out infinite alternate;
        }
        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }
        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 1; }
        }

        /* Hiệu ứng chữ gradient chạy */
        .animated-gradient-text {
            background-image: linear-gradient(
                90deg,
                #9333ea, #ec4899, #f59e0b, #10b981, #3b82f6, #9333ea
            );
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            animation: gradientTextAnimation 5s linear infinite;
        }
        .fa-animated-gradient {
            background-image: linear-gradient(
                90deg,
                #9333ea, #ec4899, #f59e0b, #10b981, #3b82f6, #9333ea
            );
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent !important;
            animation: gradientTextAnimation 5s linear infinite;
        }

        @keyframes gradientTextAnimation {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        /* Hiệu ứng viền phát sáng đổi màu cho ảnh dự án */
        .animated-image-glow {
            border-radius: 0.75rem;
            animation: rainbowGlowAnimation 6s linear infinite;
            box-shadow: 0 0 5px rgba(255,255,255,0.3);
        }
        @keyframes rainbowGlowAnimation {
            0%, 100% { box-shadow: 0 0 10px 2px #ef4444, 0 0 5px #ef4444 inset; }
            16% { box-shadow: 0 0 10px 2px #f97316, 0 0 5px #f97316 inset; }
            32% { box-shadow: 0 0 10px 2px #eab308, 0 0 5px #eab308 inset; }
            48% { box-shadow: 0 0 10px 2px #22c55e, 0 0 5px #22c55e inset; }
            64% { box-shadow: 0 0 10px 2px #3b82f6, 0 0 5px #3b82f6 inset; }
            80% { box-shadow: 0 0 10px 2px #8b5cf6, 0 0 5px #8b5cf6 inset; }
        }

        /* Hiệu ứng hue-rotate chỉ cho SVG (Zalo icon) */
        .animated-hue-rotate-svg {
            animation: hueRotateAnimation 4s linear infinite;
        }
        @keyframes hueRotateAnimation {
            0% { filter: hue-rotate(0deg) saturate(1.5) brightness(1.1); }
            50% { filter: hue-rotate(180deg) saturate(2) brightness(1.2); }
            100% { filter: hue-rotate(360deg) saturate(1.5) brightness(1.1); }
        }
        .app-transfer-button {
            display: inline-flex;
            align-items: center;
            padding: 0.5rem 1rem; /* py-2 px-4 */
            border-radius: 0.5rem; /* rounded-lg */
            font-weight: 500; /* font-medium */
            transition: background-color 0.3s ease, transform 0.2s ease;
            margin-top: 0.75rem; /* mt-3 */
            margin-left: 0.25rem; /* mx-1 */
            margin-right: 0.25rem;
        }
        .app-transfer-button:hover {
            transform: translateY(-2px);
        }
        .momo-button {
            background-color: #a50064; /* Màu hồng đậm của Momo */
            color: white;
        }
        .momo-button:hover {
            background-color: #d00283;
        }
        .mbbank-button {
            background-color: #005baa; /* Màu xanh của MB Bank */
            color: white;
        }
        .mbbank-button:hover {
            background-color: #0078d4;
        }


    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="antialiased">

    <div id="star-fall-container"></div>

    <div class="container mx-auto p-4 md:p-8 max-w-2xl text-center relative z-10">
        <div class="mb-8">
            <img id="mainAvatar" src="images/avatar.jpg" alt="Ảnh đại diện" class="main-avatar-image no-context-menu w-32 h-32 md:w-40 md:h-40 rounded-full mx-auto border-4 border-violet-500 shadow-xl transform hover:scale-110 transition-transform duration-300">
            <h1 class="text-3xl md:text-4xl font-bold mt-4 animated-gradient-text">Tên Của Bạn</h1>
            <p class="text-gray-400 text-sm md:text-base">Một dòng mô tả ngắn về bạn ở đây.</p>
        </div>

        <div class="mb-10">
            <h2 class="text-2xl md:text-3xl font-semibold mb-6 animated-gradient-text">Kết Nối Với Tôi</h2>
            <div class="grid grid-cols-1 sm:grid-cols-1 gap-x-6 gap-y-5">
                <div class="social-item-container">
                    <a href="https://www.facebook.com/share/16dvvciK3c/" target="_blank" rel="noopener noreferrer" class="social-link">
                        <i class="fab fa-facebook-square fa-2x fa-animated-gradient"></i>
                        <span class="font-medium animated-gradient-text">Facebook</span>
                    </a>
                    <div class="qr-code-social-wrapper">
                        <img src="images/fb.png" alt="QR Facebook" class="qr-code-social no-context-menu w-16 h-16 md:w-20 md:h-20 rounded-md border border-gray-700 bg-white p-0.5" data-social-link="https://www.facebook.com/share/16dvvciK3c/">
                        <p class="text-xs text-gray-500 mt-1 italic">Nhấn QR để quét</p>
                    </div>
                </div>
                <div class="social-item-container">
                    <a href="https://www.tiktok.com/@ken_jin0?_t=ZS-8whRY0Ieqca&_r=1" target="_blank" rel="noopener noreferrer" class="social-link">
                        <i class="fab fa-tiktok fa-2x fa-animated-gradient"></i>
                        <span class="font-medium animated-gradient-text">TikTok</span>
                    </a>
                     <div class="qr-code-social-wrapper">
                        <img src="images/tiktok.jpg" alt="QR TikTok" class="qr-code-social no-context-menu w-16 h-16 md:w-20 md:h-20 rounded-md border border-gray-700 bg-white p-0.5" data-social-link="https://www.tiktok.com/@ken_jin0?_t=ZS-8whRY0Ieqca&_r=1">
                        <p class="text-xs text-gray-500 mt-1 italic">Nhấn QR để quét</p>
                    </div>
                </div>
                <div class="social-item-container">
                    <a href="https://zalo.me/your_zalo_number_or_id" target="_blank" rel="noopener noreferrer" class="social-link group"> <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 animated-hue-rotate-svg" viewBox="0 0 250 250" fill="#2563eb">
                            <path d="M125 0C56.062 0 0 56.062 0 125s56.062 125 125 125 125-56.062 125-125S193.938 0 125 0zm63.578 165.59c-2.031 2.031-4.625 3.078-7.75 3.078s-5.719-1.047-7.75-3.078l-37.938-37.938-21.062 21.062c-2.781 2.781-6.812 4.203-10.781 4.203s-8-1.422-10.781-4.203l-21.062-21.062-37.938 37.938c-2.031 2.031-4.625 3.078-7.75 3.078s-5.719-1.047-7.75-3.078c-4.297-4.297-4.297-11.25 0-15.547l37.938-37.938-21.062-21.062c-2.781-2.781-4.203-6.812-4.203-10.781s1.422-8 4.203-10.781l21.062-21.062-37.938-37.938c-4.297-4.297-4.297-11.25 0-15.547s11.25-4.297 15.547 0l37.938 37.938 21.062-21.062c2.781-2.781 6.812-4.203 10.781-4.203s8 1.422 10.781 4.203l21.062 21.062 37.938-37.938c4.297-4.297 11.25-4.297 15.547 0s4.297 11.25 0 15.547l-37.938 37.938 21.062 21.062c2.781 2.781 4.203 6.812 4.203 10.781s-1.422 8-4.203 10.781l-21.062 21.062 37.938 37.938c4.297 4.297 4.297 11.25 0 15.547z"/>
                        </svg>
                        <span class="font-medium animated-gradient-text">Zalo</span>
                    </a>
                    <div class="qr-code-social-wrapper">
                        <img src="images/zalo.jpg" alt="QR Zalo" class="qr-code-social no-context-menu w-16 h-16 md:w-20 md:h-20 rounded-md border border-gray-700 bg-white p-0.5" data-social-link="https://zalo.me/your_zalo_number_or_id">
                        <p class="text-xs text-gray-500 mt-1 italic">Nhấn QR để quét</p>
                    </div>
                </div>
                <div class="social-item-container">
                    <a href="https://www.instagram.com/_anhtuan_0/profilecard/?igsh=MWRnZW16ODd5NDZ3Nw==" target="_blank" rel="noopener noreferrer" class="social-link">
                        <i class="fab fa-instagram fa-2x fa-animated-gradient"></i>
                        <span class="font-medium animated-gradient-text">Instagram</span>
                    </a>
                    <div class="qr-code-social-wrapper">
                        <img src="images/inta.png" alt="QR Instagram" class="qr-code-social no-context-menu w-16 h-16 md:w-20 md:h-20 rounded-md border border-gray-700 bg-white p-0.5" data-social-link="https://www.instagram.com/_anhtuan_0/profilecard/?igsh=MWRnZW16ODd5NDZ3Nw==">
                        <p class="text-xs text-gray-500 mt-1 italic">Nhấn QR để quét</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="mb-8">
            <h2 class="text-2xl md:text-3xl font-semibold mb-6 animated-gradient-text">Thông Tin Ngân Hàng</h2>
            <div class="flex flex-wrap justify-center gap-4">
                <div class="bank-logo-container" data-bank="bank1">
                    <img src="images/momo.png" alt="Logo Ngân hàng A" class="bank-logo-img">
                    <p class="text-sm text-gray-300">Momo</p>
                </div>
                <div class="bank-logo-container" data-bank="bank2">
                     <img src="images/mbbank.jpg" alt="Logo MB Bank" class="bank-logo-img">
                    <p class="text-sm text-gray-300">MB Bank</p>
                </div>
            </div>
        </div>
         <div class="mb-10">
            <h2 class="text-2xl md:text-3xl font-semibold mb-6 animated-gradient-text">Dự Án Nổi Bật</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                <div class="bg-gray-800/80 p-1 rounded-xl animated-image-glow">
                     <img src="https://placehold.co/600x400/38a169/e2e8f0?text=Dự+Án+1" alt="Dự án 1" class="w-full h-48 object-cover rounded-lg no-context-menu">
                </div>
                <div class="bg-gray-800/80 p-1 rounded-xl animated-image-glow">
                    <img src="https://placehold.co/600x400/dd6b20/e2e8f0?text=Dự+Án+2" alt="Dự án 2" class="w-full h-48 object-cover rounded-lg no-context-menu">
                </div>
            </div>
        </div>
    </div>


    <div id="bankModal" class="modal fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 hidden opacity-0 visibility-hidden" aria-labelledby="bank-modal-title" role="dialog" aria-modal="true">
        <div class="modal-content p-2 sm:p-3 rounded-xl shadow-2xl w-auto max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl relative text-center">
            <button id="closeBankModal" class="absolute top-1 right-2 sm:top-2 sm:right-3 text-gray-400 hover:text-white text-3xl leading-none z-10" aria-label="Đóng">&times;</button>
            <div id="bankModalContentArea" class="text-center p-4">
                <img id="modalBankQR" src="" alt="QR Ngân hàng" class="mx-auto mb-2 rounded-lg border-2 border-indigo-500 bg-white p-1 no-context-menu" style="width: 90vmin; height: 90vmin; object-fit: contain;">
                <p class="text-xs text-gray-400 mb-3 italic">Nhấn vào QR để sao chép STK</p>
                <h3 id="modalBankName" class="text-lg sm:text-xl font-semibold mb-1 text-indigo-300 animated-gradient-text" aria-label="bank-modal-title"></h3>
                <p class="text-sm text-gray-300">Chủ tài khoản: <strong id="modalAccountHolder" class="font-medium text-gray-100"></strong></p>
                <div class="flex items-center justify-center my-2">
                    <p class="text-sm text-gray-300">Số tài khoản: <strong id="modalAccountNumber" class="font-medium text-gray-100"></strong></p>
                    <button id="copyAccountNumberButton" title="Sao chép số tài khoản" class="ml-2 text-indigo-400 hover:text-indigo-300 transition-colors">
                        <i class="far fa-copy"></i>
                    </button>
                </div>
                <p id="copyMessage" class="text-green-400 text-xs mt-1 mb-3 h-4"></p>

                <div id="appTransferButtonsContainer" class="mt-4">
                    <button id="transferMomoButton" class="app-transfer-button momo-button">
                        <i class="fas fa-wallet mr-2"></i>Chuyển qua Momo
                    </button>
                    <button id="transferMBBankButton" class="app-transfer-button mbbank-button hidden">
                        <i class="fas fa-university mr-2"></i>Chuyển qua App MB Bank
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="socialQrModal" class="modal fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 hidden opacity-0 visibility-hidden" aria-labelledby="social-qr-modal-title" role="dialog" aria-modal="true">
        <div class="modal-content p-2 sm:p-3 rounded-xl shadow-2xl w-auto max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl relative text-center">
            <button id="closeSocialQrModal" class="absolute top-1 right-2 sm:top-2 sm:right-3 text-gray-400 hover:text-white text-3xl leading-none z-10" aria-label="Đóng">&times;</button>
            <h3 id="social-qr-modal-title" class="text-lg font-medium text-indigo-300 mb-2 sr-only">Mã QR Mạng Xã Hội</h3>
            <img id="enlargedSocialQrImage" src="" alt="Mã QR Mạng Xã Hội Phóng To" class="mx-auto rounded-lg bg-white p-1 border-2 border-indigo-400 no-context-menu" style="width: 90vmin; height: 90vmin; object-fit: contain;">
            <p class="text-xs text-gray-400 mt-2 italic">Nhấn vào QR để chuyển đến ứng dụng</p>
        </div>
    </div>

    <div id="avatarModal" class="modal fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 hidden opacity-0 visibility-hidden" aria-labelledby="avatar-modal-title" role="dialog" aria-modal="true">
        <div class="modal-content p-2 rounded-xl shadow-2xl w-auto max-w-md sm:max-w-lg md:max-w-xl lg:max-w-2xl relative text-center">
            <button id="closeAvatarModal" class="absolute top-1 right-2 text-gray-300 hover:text-white text-3xl leading-none z-10" aria-label="Đóng">&times;</button>
            <h3 id="avatar-modal-title" class="sr-only">Ảnh Đại Diện Phóng To</h3>
            <img id="enlargedAvatarImage" src="" alt="Ảnh Đại Diện Phóng To" class="mx-auto rounded-lg no-context-menu" style="width: 70vmin; height: 70vmin; object-fit: cover; border: 3px solid #8b5cf6;">
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Thông tin cấu hình ---
            const YOUR_MOMO_PHONE_OR_ID = "YOUR_MOMO_PHONE_HERE"; // <<<<----- THAY SỐ MOMO CỦA BẠN VÀO ĐÂY
            let currentSocialLinkForEnlargedQR = ''; // Biến lưu link MXH cho QR đang phóng to

            // --- Chống click chuột phải trên các ảnh được đánh dấu ---
            const noContextMenuImages = document.querySelectorAll('.no-context-menu');
            noContextMenuImages.forEach(img => {
                img.addEventListener('contextmenu', function(event) {
                    event.preventDefault();
                });
                img.style.webkitTouchCallout = 'none'; 
                img.style.userSelect = 'none'; 
            });


            // --- Hiệu ứng sao rơi ---
            const starContainer = document.getElementById('star-fall-container');
            const numberOfStars = 100; 

            for (let i = 0; i < numberOfStars; i++) {
                let star = document.createElement('div');
                star.classList.add('star');
                star.style.left = `${Math.random() * 100}%`; 
                const size = Math.random() * 2.5 + 0.5; 
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.animationDuration = `${Math.random() * 5 + 5}s`; 
                star.style.animationDelay = `${Math.random() * 5}s`; 
                star.style.animationName = 'fall, twinkle'; 
                star.style.animationTimingFunction = 'linear, ease-in-out';
                star.style.animationIterationCount = 'infinite, infinite';
                star.style.animationDirection = 'normal, alternate';
                starContainer.appendChild(star);
            }
            
            // --- Hàm sao chép văn bản chung ---
            function copyToClipboard(text, messageElementId) {
                const messageElement = document.getElementById(messageElementId);
                const tempTextArea = document.createElement('textarea');
                tempTextArea.value = text;
                document.body.appendChild(tempTextArea);
                tempTextArea.select();
                try {
                    document.execCommand('copy');
                    if(messageElement) messageElement.textContent = 'Đã sao chép STK!';
                } catch (err) {
                    if(messageElement) messageElement.textContent = 'Lỗi sao chép!';
                    console.error('Không thể sao chép: ', err);
                }
                document.body.removeChild(tempTextArea);
                setTimeout(() => {
                    if(messageElement) messageElement.textContent = '';
                }, 2000);
            }

            // --- Xử lý Modal Ngân Hàng ---
            const bankItems = document.querySelectorAll('.bank-logo-container');
            const bankModal = document.getElementById('bankModal');
            const closeBankModalButton = document.getElementById('closeBankModal'); 
            const modalBankQRElement = document.getElementById('modalBankQR');
            const copyAccountNumberButton = document.getElementById('copyAccountNumberButton');
            const transferMomoButton = document.getElementById('transferMomoButton');
            const transferMBBankButton = document.getElementById('transferMBBankButton');
            let currentBankData = null; 


            const bankData = {
                bank1: {
                    qrUrl: "images/momo.jpg", 
                    bankName: "Ví Điện Tử Momo", 
                    accountHolder: "PHAM ANH TUAN", 
                    accountNumber: "0384627353" 
                },
                bank2: {
                    qrUrl: "images/mb.jpg", 
                    bankName: "MB Bank (Ngân hàng Quân Đội)", 
                    accountHolder: "PHAM ANH TUAN", 
                    accountNumber: "060797" 
                }
            };

            bankItems.forEach(item => {
                item.addEventListener('click', function () {
                    const bankId = this.dataset.bank;
                    currentBankData = bankData[bankId]; 

                    if (currentBankData) {
                        if(modalBankQRElement) modalBankQRElement.src = currentBankData.qrUrl;
                        document.getElementById('modalBankName').textContent = currentBankData.bankName;
                        document.getElementById('modalAccountHolder').textContent = currentBankData.accountHolder;
                        document.getElementById('modalAccountNumber').textContent = currentBankData.accountNumber;
                        
                        if (transferMBBankButton && transferMomoButton) {
                            if (currentBankData.bankName && currentBankData.bankName.toLowerCase().includes("mb bank")) {
                                transferMBBankButton.classList.remove('hidden');
                                transferMomoButton.classList.add('hidden');
                            } else { 
                                transferMomoButton.classList.remove('hidden');
                                transferMBBankButton.classList.add('hidden');
                            }
                        }
                        
                        if(bankModal) {
                            bankModal.classList.remove('hidden', 'opacity-0', 'visibility-hidden');
                            bankModal.classList.add('open');
                        }
                    }
                });
            });

            function closeBankModalFunc() {
                if(bankModal) {
                    bankModal.classList.add('opacity-0', 'visibility-hidden');
                    bankModal.classList.remove('open');
                    setTimeout(() => {
                         if (!bankModal.classList.contains('open')) {
                            bankModal.classList.add('hidden');
                         }
                    }, 300);
                    const copyMessageEl = document.getElementById('copyMessage');
                    if (copyMessageEl) copyMessageEl.textContent = '';
                    currentBankData = null; 
                }
            }

            if(closeBankModalButton) closeBankModalButton.addEventListener('click', closeBankModalFunc);
            if(bankModal) bankModal.addEventListener('click', function (event) {
                if (event.target === bankModal) {
                    closeBankModalFunc();
                }
            });
            
            if(copyAccountNumberButton) {
                copyAccountNumberButton.addEventListener('click', function() {
                    const accountNumberEl = document.getElementById('modalAccountNumber');
                    if (accountNumberEl) {
                        copyToClipboard(accountNumberEl.textContent, 'copyMessage');
                    }
                });
            }

            if(modalBankQRElement) {
                modalBankQRElement.addEventListener('click', function() {
                    const accountNumberEl = document.getElementById('modalAccountNumber');
                     if (accountNumberEl) {
                        copyToClipboard(accountNumberEl.textContent, 'copyMessage');
                    }
                });
            }

            if(transferMomoButton) {
                transferMomoButton.addEventListener('click', function() {
                    let momoTargetAccount = YOUR_MOMO_PHONE_OR_ID;
                    if (currentBankData && currentBankData.bankName && currentBankData.bankName.toLowerCase().includes("momo") && currentBankData.accountNumber) {
                        momoTargetAccount = currentBankData.accountNumber;
                    }

                    if (momoTargetAccount === "YOUR_MOMO_PHONE_HERE" || !momoTargetAccount) {
                         alert("Vui lòng cấu hình số điện thoại/ID Momo trong code JavaScript (biến YOUR_MOMO_PHONE_OR_ID) hoặc đảm bảo thông tin tài khoản Momo chính xác.");
                        return;
                    }
                    window.location.href = `momo://transfer?phone=${momoTargetAccount}`;
                });
            }

            if(transferMBBankButton) {
                transferMBBankButton.addEventListener('click', function() {
                    if (currentBankData && currentBankData.accountNumber && currentBankData.bankName.toLowerCase().includes("mb bank")) {
                        window.location.href = `mbbank://transfer_p2p?receiver_account_no=${currentBankData.accountNumber}`;
                    } else {
                        alert("Không tìm thấy thông tin tài khoản MB Bank hoặc đây không phải tài khoản MB Bank.");
                    }
                });
            }


            // --- Xử lý Modal Phóng To QR Mạng Xã Hội ---
            const socialQrImages = document.querySelectorAll('.qr-code-social');
            const socialQrModal = document.getElementById('socialQrModal');
            const enlargedSocialQrImage = document.getElementById('enlargedSocialQrImage');
            const closeSocialQrModalButton = document.getElementById('closeSocialQrModal');

            socialQrImages.forEach(img => {
                img.addEventListener('click', function(event) {
                    event.stopPropagation(); 
                    if(enlargedSocialQrImage) {
                        enlargedSocialQrImage.src = this.src;
                        currentSocialLinkForEnlargedQR = this.dataset.socialLink || this.closest('.social-item-container')?.querySelector('a.social-link')?.href || '';
                    }
                    if(socialQrModal) {
                        socialQrModal.classList.remove('hidden', 'opacity-0', 'visibility-hidden');
                        socialQrModal.classList.add('open');
                    }
                });
            });
            
            if(enlargedSocialQrImage) {
                enlargedSocialQrImage.addEventListener('click', function() {
                    if (currentSocialLinkForEnlargedQR) {
                        window.open(currentSocialLinkForEnlargedQR, '_blank');
                    }
                });
            }


            function closeSocialQrModalFunc() {
                if(socialQrModal) {
                    socialQrModal.classList.add('opacity-0', 'visibility-hidden');
                    socialQrModal.classList.remove('open');
                     setTimeout(() => {
                         if (!socialQrModal.classList.contains('open')) {
                            socialQrModal.classList.add('hidden');
                         }
                    }, 300);
                    currentSocialLinkForEnlargedQR = ''; 
                }
            }

            if(closeSocialQrModalButton) closeSocialQrModalButton.addEventListener('click', closeSocialQrModalFunc);
            if(socialQrModal) socialQrModal.addEventListener('click', function(event) {
                if (event.target === socialQrModal && event.target !== enlargedSocialQrImage) { 
                    closeSocialQrModalFunc();
                }
            });

            // --- Xử lý Modal Phóng To Avatar ---
            const mainAvatar = document.getElementById('mainAvatar');
            const avatarModal = document.getElementById('avatarModal');
            const enlargedAvatarImage = document.getElementById('enlargedAvatarImage');
            const closeAvatarModalButton = document.getElementById('closeAvatarModal');

            if(mainAvatar) {
                mainAvatar.addEventListener('click', function() {
                    if(enlargedAvatarImage) enlargedAvatarImage.src = this.src;
                    if(avatarModal) {
                        avatarModal.classList.remove('hidden', 'opacity-0', 'visibility-hidden');
                        avatarModal.classList.add('open');
                    }
                });
            }
            
            function closeAvatarModalFunc() {
                if(avatarModal) {
                    avatarModal.classList.add('opacity-0', 'visibility-hidden');
                    avatarModal.classList.remove('open');
                     setTimeout(() => {
                         if (!avatarModal.classList.contains('open')) {
                            avatarModal.classList.add('hidden');
                         }
                    }, 300);
                }
            }

            if(closeAvatarModalButton) closeAvatarModalButton.addEventListener('click', closeAvatarModalFunc);
            if(avatarModal) avatarModal.addEventListener('click', function(event) {
                if (event.target === avatarModal && event.target !== enlargedAvatarImage) { 
                    closeAvatarModalFunc();
                }
            });
        });
    </script>
</body>
</html>
